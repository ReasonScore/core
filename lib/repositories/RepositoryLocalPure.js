"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.RepositoryLocalPure = void 0;

var _RsData = require("../dataModels/RsData");

var _claims = require("./reducers/claims");

var _claimEdges = require("./reducers/claimEdges");

var _RepositoryLocalBase = require("./RepositoryLocalBase");

var _scores = require("./reducers/scores");

var _scoresTrees = require("./reducers/scoresTrees");

class RepositoryLocalPure extends _RepositoryLocalBase.RepositoryLocalBase {
  constructor(rsData = new _RsData.RsData()) {
    super(rsData);
    this.rsData = rsData;
  }

  async notify(actions) {
    this.rsData.actionsLog.push({
      actions: actions
    }); //TODO: put logs back in

    for (const action of actions) {
      this.rsData = (0, _claims.claims)(this.rsData, action);
      this.rsData = (0, _claimEdges.claimEdges)(this.rsData, action);
      this.rsData = (0, _scores.scores)(this.rsData, action);
      this.rsData = (0, _scoresTrees.scoreTrees)(this.rsData, action);
    }
  }

}

exports.RepositoryLocalPure = RepositoryLocalPure;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9yZXBvc2l0b3JpZXMvUmVwb3NpdG9yeUxvY2FsUHVyZS50cyJdLCJuYW1lcyI6WyJSZXBvc2l0b3J5TG9jYWxQdXJlIiwiUmVwb3NpdG9yeUxvY2FsQmFzZSIsImNvbnN0cnVjdG9yIiwicnNEYXRhIiwiUnNEYXRhIiwibm90aWZ5IiwiYWN0aW9ucyIsImFjdGlvbnNMb2ciLCJwdXNoIiwiYWN0aW9uIl0sIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQ0E7O0FBRUE7O0FBQ0E7O0FBQ0E7O0FBQ0E7O0FBQ0E7O0FBR08sTUFBTUEsbUJBQU4sU0FBa0NDLHdDQUFsQyxDQUE2RTtBQUVoRkMsRUFBQUEsV0FBVyxDQUNBQyxNQUFjLEdBQUcsSUFBSUMsY0FBSixFQURqQixFQUVUO0FBQ0UsVUFBTUQsTUFBTjtBQURGLFNBRFNBLE1BQ1QsR0FEU0EsTUFDVDtBQUVEOztBQUVELFFBQU1FLE1BQU4sQ0FBYUMsT0FBYixFQUFnQztBQUM1QixTQUFLSCxNQUFMLENBQVlJLFVBQVosQ0FBdUJDLElBQXZCLENBQTRCO0FBQUNGLE1BQUFBLE9BQU8sRUFBQ0E7QUFBVCxLQUE1QixFQUQ0QixDQUNvQjs7QUFDaEQsU0FBSyxNQUFNRyxNQUFYLElBQXFCSCxPQUFyQixFQUE4QjtBQUMxQixXQUFLSCxNQUFMLEdBQWMsb0JBQU8sS0FBS0EsTUFBWixFQUFvQk0sTUFBcEIsQ0FBZDtBQUNBLFdBQUtOLE1BQUwsR0FBYyw0QkFBVyxLQUFLQSxNQUFoQixFQUF3Qk0sTUFBeEIsQ0FBZDtBQUNBLFdBQUtOLE1BQUwsR0FBYyxvQkFBTyxLQUFLQSxNQUFaLEVBQW9CTSxNQUFwQixDQUFkO0FBQ0EsV0FBS04sTUFBTCxHQUFjLDZCQUFXLEtBQUtBLE1BQWhCLEVBQXdCTSxNQUF4QixDQUFkO0FBQ0g7QUFDSjs7QUFoQitFIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQWN0aW9uIH0gZnJvbSBcIi4uL2RhdGFNb2RlbHMvQWN0aW9uXCI7XHJcbmltcG9ydCB7IFJzRGF0YSB9IGZyb20gXCIuLi9kYXRhTW9kZWxzL1JzRGF0YVwiO1xyXG5pbXBvcnQgeyBpUmVwb3NpdG9yeSB9IGZyb20gXCIuLi9kYXRhTW9kZWxzL2lSZXBvc2l0b3J5XCI7XHJcbmltcG9ydCB7IGNsYWltcyB9IGZyb20gXCIuL3JlZHVjZXJzL2NsYWltc1wiO1xyXG5pbXBvcnQgeyBjbGFpbUVkZ2VzIH0gZnJvbSBcIi4vcmVkdWNlcnMvY2xhaW1FZGdlc1wiO1xyXG5pbXBvcnQgeyBSZXBvc2l0b3J5TG9jYWxCYXNlIH0gZnJvbSBcIi4vUmVwb3NpdG9yeUxvY2FsQmFzZVwiO1xyXG5pbXBvcnQgeyBzY29yZXMgfSBmcm9tIFwiLi9yZWR1Y2Vycy9zY29yZXNcIjtcclxuaW1wb3J0IHsgc2NvcmVUcmVlcyB9IGZyb20gXCIuL3JlZHVjZXJzL3Njb3Jlc1RyZWVzXCI7XHJcblxyXG5cclxuZXhwb3J0IGNsYXNzIFJlcG9zaXRvcnlMb2NhbFB1cmUgZXh0ZW5kcyBSZXBvc2l0b3J5TG9jYWxCYXNlIGltcGxlbWVudHMgaVJlcG9zaXRvcnkge1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKFxyXG4gICAgICAgIHB1YmxpYyByc0RhdGE6IFJzRGF0YSA9IG5ldyBSc0RhdGEoKVxyXG4gICAgKSB7XHJcbiAgICAgICAgc3VwZXIocnNEYXRhKTtcclxuICAgIH1cclxuXHJcbiAgICBhc3luYyBub3RpZnkoYWN0aW9uczogQWN0aW9uW10pIHtcclxuICAgICAgICB0aGlzLnJzRGF0YS5hY3Rpb25zTG9nLnB1c2goe2FjdGlvbnM6YWN0aW9uc30pOyAvL1RPRE86IHB1dCBsb2dzIGJhY2sgaW5cclxuICAgICAgICBmb3IgKGNvbnN0IGFjdGlvbiBvZiBhY3Rpb25zKSB7XHJcbiAgICAgICAgICAgIHRoaXMucnNEYXRhID0gY2xhaW1zKHRoaXMucnNEYXRhLCBhY3Rpb24pO1xyXG4gICAgICAgICAgICB0aGlzLnJzRGF0YSA9IGNsYWltRWRnZXModGhpcy5yc0RhdGEsIGFjdGlvbik7XHJcbiAgICAgICAgICAgIHRoaXMucnNEYXRhID0gc2NvcmVzKHRoaXMucnNEYXRhLCBhY3Rpb24pO1xyXG4gICAgICAgICAgICB0aGlzLnJzRGF0YSA9IHNjb3JlVHJlZXModGhpcy5yc0RhdGEsIGFjdGlvbik7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxufSJdfQ==